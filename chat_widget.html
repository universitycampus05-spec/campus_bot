<style>
/* –ü–ª–∞–≤–∞—é—â–∏–π –∫—Ä—É–∂–æ–∫ */
#chat-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: #007bff;
    color: white;
    text-align: center;
    line-height: 60px;
    font-size: 30px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    z-index: 9999;
}

/* –û–∫–Ω–æ —á–∞—Ç–∞ */
#chat-window {
    display: none;
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 320px;
    max-height: 400px;
    border-radius: 10px;
    background: white;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    z-index: 9998;
    flex-direction: column;
    overflow: hidden;
    font-family: Arial, sans-serif;
}

/* –°–æ–æ–±—â–µ–Ω–∏—è */
#chat-messages {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
    border-bottom: 1px solid #ccc;
    font-size: 14px;
}

/* –ü–æ–ª–µ –≤–≤–æ–¥–∞ */
#chat-input {
    display: flex;
    padding: 5px;
    background: #f0f0f0;
}

#chat-input input {
    flex: 1;
    padding: 6px 8px;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 14px;
}

#chat-input button {
    margin-left: 5px;
    border: none;
    background: #007bff;
    color: white;
    border-radius: 5px;
    padding: 6px 10px;
    cursor: pointer;
    font-size: 14px;
}

#chat-messages div {
    margin-bottom: 8px;
}
</style>

<!-- –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ -->
<div id="chat-button">üí¨</div>

<!-- –û–∫–Ω–æ —á–∞—Ç–∞ -->
<div id="chat-window" style="display: flex; flex-direction: column;">
    <div id="chat-messages"></div>
    <div id="chat-input">
        <input type="text" id="chat-text" placeholder="–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ..." />
        <button id="send-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>
</div>

<script>
const chatButton = document.getElementById('chat-button');
const chatWindow = document.getElementById('chat-window');
const chatMessages = document.getElementById('chat-messages');
const chatInput = document.getElementById('chat-text');
const sendBtn = document.getElementById('send-btn');

// –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —á–∞—Ç
chatButton.addEventListener('click', () => {
    chatWindow.style.display =
        chatWindow.style.display === 'flex' ? 'none' : 'flex';
});

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
async function sendMessage() {
    let message = chatInput.value.trim();
    if (!message) return;

    chatMessages.innerHTML += `<div><b>–¢—ã:</b> ${message}</div>`;
    chatInput.value = '';
    chatMessages.scrollTop = chatMessages.scrollHeight;

    try {
        // –¢–í–û–ô URL —Å–µ—Ä–≤–µ—Ä–∞ Render
        let response = await fetch(
            ""https://campus-bot-tzxr.onrender.com/ask?question=" + encodeURIComponent(message)
        );

        let data = await response.text();

        chatMessages.innerHTML += `<div><b>–ë–æ—Ç:</b> ${data}</div>`;
        chatMessages.scrollTop = chatMessages.scrollHeight;

    } catch (err) {
        chatMessages.innerHTML += `<div><b>–ë–æ—Ç:</b> –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞</div>`;
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }
}

// –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
sendBtn.addEventListener('click', sendMessage);

// Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
chatInput.addEventListener('keydown', function(e){
    if (e.key === "Enter") sendMessage();
});
</script>
